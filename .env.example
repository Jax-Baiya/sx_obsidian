# sx_obsidian â€” example configuration
# Copy to .env and edit paths.

# -----------------------------
# Generator profiles
# -----------------------------
SX_PROFILE=default

# Optional source profile mappings (SchedulerX-style / adapter-friendly):
# You can keep these in SchedulerX/.env, sx_obsidian/.env, or both.
# The adapter supports SRC_PROFILE_N and SRC_PATH_N naming.
SRC_PROFILE_1=/mnt/t/AlexNova/data
SRC_PROFILE_1_LABEL=AlexNova Active (T:)
DATABASE_PROFILE_1=assets_1
# Optional SQL_N sqlite path for mode=SQL
# SQL_DB_PATH_1=data/sx_obsidian_assets_1.db

# Optional per-profile vault mappings (launcher awareness)
VAULT_WINDOWS_1=T:\\AlexNova
VAULT_LINUX_1=/mnt/t/AlexNova

VAULT_default=/mnt/t/AlexNova
VAULT_WINDOWS_default=T:\\AlexNova
PATH_STYLE=windows

CSV_consolidated_1=/path/to/consolidated.csv
CSV_authors_1=/path/to/authors.csv
CSV_bookmarks_1=/path/to/bookmarks.csv

DATA_DIR=data
DB_DIR=_db/media_active
LOG_DIR=_logs

# Keep generator logs outside vault by default
LOG_IN_VAULT=0
LOG_RETAIN=50

# Archive directory for generated notes when using --archive-stale
ARCHIVE_DIR=_archive/sx_obsidian_db

# -----------------------------
# SQLite library + API (sx_db)
# -----------------------------
# Direct DB path (manual override):
SX_DB_PATH=data/sx_obsidian.db

# Profile adapter defaults used by sxctl.sh / Make targets:
# - SchedulerX env file that defines source profiles
SX_SCHEDULERX_ENV=../SchedulerX/.env
# - Target source profile index (maps to SRC_PROFILE_1 / SRC_PATH_1 style keys)
SX_PROFILE_INDEX=1
# - Derived DB naming template for profile-based runs. Token: {source_id}
SX_DB_PATH_TEMPLATE=data/sx_obsidian_{source_id}.db

# Runtime backend mode:
# - SQLITE (default): use local sqlite directly
# - POSTGRES_MIRROR: mirror selected PostgreSQL profile into sqlite-compatible tables
SX_DB_BACKEND_MODE=SQLITE
# Throttle postgres mirror refreshes (seconds)
SX_DB_BACKEND_SYNC_TTL_SEC=120
# Pipeline profile mode used by launcher: LOCAL | SESSION | TRANSACTION | SQL
SX_PIPELINE_DB_MODE=LOCAL
# Optional explicit postgres alias/url overrides:
# SX_PIPELINE_DB_PROFILE=LOCAL_1
# SX_PIPELINE_DATABASE_URL=postgresql://user:pass@host:5432/db?options=-c%20search_path%3Dpipe

SX_DB_ENABLE_FTS=1

SX_API_HOST=127.0.0.1
SX_API_PORT=8123
SX_API_CORS_ALLOW_ALL=1
SX_DEFAULT_SOURCE_ID=default

# API diagnostic logs (rotating; old logs auto-deleted)
SX_API_LOG_DIR=_logs
SX_API_LOG_LEVEL=INFO
# Warning: access logs can be noisy with the Obsidian plugin.
SX_API_LOG_ACCESS=0
# How many rotated daily log files to keep.
SX_API_LOG_BACKUP_COUNT=14

# Where the plugin pins active notes (relative to vault)
SX_ACTIVE_NOTES_DIR=_db/media_active

# -----------------------------
# Plugin install automation (optional)
# -----------------------------
# Set when running: make plugin-install
# OBSIDIAN_VAULT_PATH=/mnt/t/AlexNova
